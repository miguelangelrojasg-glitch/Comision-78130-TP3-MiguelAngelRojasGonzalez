{% extends "app_coder_cai/index.html" %}

{% block titulo %}
Listado de Clientes | Tienda Coder CAI
{% endblock %}

{% block contenido %}

<!-- Hero / Encabezado -->
<section class="hero">
  <div class="container">
    <h1 class="fw-bold">Listado de Clientes</h1>
    <p class="mb-0">Buscá, filtrá y administrá tus clientes rápidamente.</p>
  </div>
</section>

<!-- Contenido principal -->
<section class="py-5 bg-light">
  <div class="container">
    <!-- Barra superior: búsqueda + acciones -->
    <div class="row align-items-center g-3 mb-4">
      <div class="col-lg-8">
        <form method="GET" class="d-flex gap-2" role="search">
          <input
            type="search"
            name="q"
            value="{{ query }}"
            placeholder="Buscar por nombre..."
            class="form-control form-control-lg"
            aria-label="Buscar clientes"
          />
          <button class="btn btn-primary btn-lg" type="submit">Buscar</button>
          <a href="{% url 'index' %}" class="btn btn-outline-light text-primary btn-lg">
            Limpiar
          </a>
        </form>
      </div>

    </div>

    <!-- Resumen del resultado -->
    <div class="d-flex justify-content-between align-items-center mb-3">
      <div>
        {% if query %}
          <span class="badge bg-primary">Filtro: “{{ query }}”</span>
        {% endif %}
      </div>
      <div class="text-muted">
        {% with total=cliente|length %}
          {{ total }} {{ total|pluralize:"resultado,resultados" }}
        {% endwith %}
      </div>
    </div>

    <!-- Tabla de clientes -->
    {% if cliente %}
      <div class="card shadow-sm border-0">
        <div class="card-body p-0">
          <div class="table-responsive">
            <table class="table align-middle mb-0">
              <thead class="table-light">
                <tr>
                  <th scope="col">Nombre</th>
                  <th scope="col">Apellido</th>
                  <th scope="col" class="d-none d-md-table-cell">Email</th>
                  <th scope="col" class="d-none d-md-table-cell">Fecha Nac.</th>
                  <th scope="col">Creado</th>
                </tr>
              </thead>
              <tbody>
                {% for c in cliente %}
                  <tr>
                    <td class="fw-semibold">{{ c.nombre }}</td>
                    <td>{{ c.apellido }}</td>
                    <td class="text-muted d-none d-md-table-cell">{{ c.email }}</td>
                    <td class="text-muted d-none d-md-table-cell">
                      {{ c.fecha_de_nacimiento|date:"d/m/Y" }}
                    </td>
                    <td>
                      <span class="badge bg-secondary">
                        {{ c.fecha_de_creacion|date:"d/m/Y H:i" }}
                      </span>
                    </td>
                  </tr>
                {% endfor %}
              </tbody>
            </table>
          </div>
        </div>
      </div>
    {% else %}
      <!-- Estado vacío -->
      <div class="card shadow-sm border-0">
        <div class="card-body text-center p-5">
          <h4 class="fw-bold text-primary mb-2">Sin resultados</h4>
          <p class="text-muted mb-4">
            {% if query %}
              No encontramos clientes que coincidan con “{{ query }}”.
            {% else %}
              Aún no tenés clientes cargados.
            {% endif %}
          </p>
          <div class="d-flex gap-2 justify-content-center">
            <a href="{% url 'nuevo_cliente' %}" class="btn btn-primary btn-lg">Crear cliente</a>
            <a href="{% url 'index' %}" class="btn btn-outline-primary btn-lg">Volver al inicio</a>
          </div>
        </div>
      </div>
    {% endif %}

    <!-- Acciones inferiores -->
    <div class="d-flex flex-column flex-sm-row gap-2 justify-content-between mt-4">
      <a href="{% url "index" %}" class="btn btn-primary btn-lg">Volver</a>
      <a href="{% url 'nuevo_cliente' %}" class="btn btn-primary btn-lg">Nuevo Cliente</a>
    </div>
  </div>
</section>

{% endblock %}
